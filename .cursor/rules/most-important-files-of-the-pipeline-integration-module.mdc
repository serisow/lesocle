---
description: 
globs: 
alwaysApply: true
---

The most important files of the pipeline_integration module. This module extends the core pipeline module by providing enhanced integration capabilities for AI-generated content with Drupal entities, media systems, and external services.

Here are the key files with their descriptions:

### Core Integration Files

@web/modules/custom/pipeline_integration/pipeline_integration.info.yml
Short description: Module definition file that describes the module's purpose of connecting AI pipelines with Drupal entities, media systems, and external services to enable content creation, media generation, and cross-platform communication.

@web/modules/custom/pipeline_integration/pipeline_integration.services.yml
Short description: Defines the service architecture for the module, including entity creation strategies, FFmpeg integration, video file management, and media entity creation services.

@web/modules/custom/pipeline_integration/PipelineIntegrationServiceProvider.php
Short description: Registers compiler passes for dynamic service collection, specifically for entity creation strategies that determine how AI-generated content becomes Drupal entities.

### Entity Creation Framework

@web/modules/custom/pipeline_integration/EntityCreation/EntityCreationStrategyManager.php
Short description: Service manager that handles dynamic registration of entity creation strategies, allowing the system to route AI-generated content to appropriate entity types.

@web/modules/custom/pipeline_integration/EntityCreation/EntityCreationStrategyInterface.php
Short description: Interface defining requirements for entity creation strategies, specifying how they should convert pipeline step results into Drupal entities.

@web/modules/custom/pipeline_integration/EntityCreation/EntityCreationStrategyBase.php
Short description: Base implementation providing shared functionality for entity creation strategies, including methods for processing featured images, SEO metadata, and taxonomy terms.

@web/modules/custom/pipeline_integration/EntityCreation/Strategy/ArticleCreationStrategy.php
Short description: Implementation that creates Article node entities from AI-generated content, handling the transformation of LLM outputs into structured Drupal nodes with proper fields.

@web/modules/custom/pipeline_integration/DependencyInjection/Compiler/EntityCreationStrategyPass.php
Short description: Compiler pass that dynamically collects services tagged as 'entity_creation_strategy' and registers them with the strategy manager.

### Media Processing Services

@web/modules/custom/pipeline_integration/Service/FFmpegService.php
Short description: Sophisticated service that handles video generation from images and audio, implementing complex FFmpeg commands for transitions, text overlays, Ken Burns effects, and animations.

@web/modules/custom/pipeline_integration/Service/VideoFileManager.php
Short description: Service that manages video file operations, including temporary directory creation, file permanence, and cleanup.

@web/modules/custom/pipeline_integration/Service/MediaEntityCreator.php
Short description: Service for creating and managing Drupal media entities from generated files, handling proper field mapping for different media bundles.

### Action Service Implementations

@web/modules/custom/pipeline_integration/Plugin/ActionService/VideoGenerationActionService.php
Short description: Action plugin that orchestrates the generation of videos from images and audio sources using FFmpeg, handling transitions, text overlays, and animations.

@web/modules/custom/pipeline_integration/Plugin/ActionService/CreateEntityActionService.php
Short description: Central action plugin that delegates entity creation to appropriate strategies, connecting pipeline output to Drupal's entity system.

@web/modules/custom/pipeline_integration/Plugin/ActionService/NewsItemImageGeneratorActionService.php
Short description: Specialized action for generating images for news items using LLM image generation APIs, supporting both DALL-E and Gemini image models.

@web/modules/custom/pipeline_integration/Plugin/ActionService/LinkedInShareActionService.php
Short description: Action plugin for sharing content to LinkedIn, handling API authentication, content formatting, and post creation.

@web/modules/custom/pipeline_integration/Plugin/ActionService/FacebookShareActionService.php
Short description: Action plugin for sharing content to Facebook Pages, managing access tokens, content validation, and posting of both text and image content.

@web/modules/custom/pipeline_integration/Plugin/ActionService/PostTweetActionService.php
Short description: Action plugin for posting to Twitter (X), converting AI-generated content into properly formatted tweets using the Twitter API.

@web/modules/custom/pipeline_integration/Plugin/ActionService/GeneratePdfActionService.php
Short description: Action that creates structured PDF documents from AI-generated HTML content using the DOMPDF library.

@web/modules/custom/pipeline_integration/Plugin/ActionService/SendSMSActionService.php
Short description: Action for sending SMS messages using the Twilio API, converting AI-generated content into mobile message format.

@web/modules/custom/pipeline_integration/Plugin/ActionService/SearchTweetsActionService.php
Short description: Action that performs Twitter search operations, handles rate limiting, and processes the results into structured data.

@web/modules/custom/pipeline_integration/Plugin/ActionService/TweetDataEnricherActionService.php
Short description: Action that enhances tweet data with additional metadata, including high-priority classification and recommended actions.

@web/modules/custom/pipeline_integration/Plugin/ActionService/URLFetcherActionService.php
Short description: Action that retrieves content from web URLs and extracts meaningful information from HTML for use in pipelines.

@web/modules/custom/pipeline_integration/Plugin/ActionService/FetchTaxonomyActionService.php
Short description: Action that retrieves taxonomy terms from specified vocabularies for use in content classification or generation.

@web/modules/custom/pipeline_integration/Plugin/ActionService/ArticleCreatedEmailNotifierService.php
Short description: Action that sends email notifications when new articles are created via pipelines, providing links and metadata.

This collection of files represents the core functionality of the pipeline_integration module, showing how it connects AI-generated content with Drupal entities and external systems to create a comprehensive content creation and distribution platform.